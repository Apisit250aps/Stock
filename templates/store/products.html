{% extends 'store/base.html' %}
<!--  -->
{% block content %}
<!--  -->

<div class="card">
    <h5 class="card-header">Borderless Table</h5>
    <div class="table-responsive text-nowrap overflow-scroll">
        <table class="table table-borderless table-hover">
            <thead>
                <tr>
                    <th>Product code</th>
                    <th>product name</th>
                    <th>unit</th>
                    <th>price</th>
                    <th>cost</th>
                    <th>amount</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="(item, index) in products" :key="index">
                    <td><i class="fab fa-angular fa-lg text-danger me-3"></i> <strong>P-[{item.code}]</strong></td>
                    <td>[{item.name}]</td>
                    <td>
                        <i class='bx-fw bx bx-package'></i>[{item.unit}] 
                    </td>
                    <td>[{item.price}] ฿</td>
                    <td>[{item.cost}] ฿</td>
                    <td>[{(item.unit * item.price ) - (item.unit * item.cost )}] ฿</td>
                    <td>
                        <div class="dropdown">
                            <button type="button" class="btn p-0 dropdown-toggle hide-arrow" data-bs-toggle="dropdown">
                                <i class="bx bx-dots-vertical-rounded"></i>
                            </button>
                            <div class="dropdown-menu">
                                <a class="dropdown-item" href="javascript:void(0);"><i class="bx bx-edit-alt me-1"></i>
                                    Edit</a>
                                <a class="dropdown-item" href="javascript:void(0);"><i class="bx bx-trash me-1"></i>
                                    Delete</a>
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
{% endblock content %}
<!--  -->
{% block script %}
<script>
    const { createApp } = Vue;
    const app = createApp(
        {
            delimiters: ["[{", "}]"],
            data() {
                return {
                    layout: "store",
                    page: "products",
                    products:null
                };
            },
            async mounted(){

                await axios(
                    {
                        method:"get",
                        url:"{% url 'get-store-product-api' %}"
                    }
                ).then((response)=>{
                    this.products = response.data
                })

            }
        }
    );
    app.mount("#app")
</script>
{% endblock script %}